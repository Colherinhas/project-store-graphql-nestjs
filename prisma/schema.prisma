generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserCart {
  id        String    @id @unique @default(uuid())
  userId    String    @unique
  user      User      @relation("UserId", fields: [userId], references: [id])
  products  Product[]
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt
}

model Product {
  id                String          @id @unique @default(uuid())
  name              String
  description       String?
  stock             Int
  price             Float?
  carts             UserCart[]
  photoUrl          String?
  productCategoryId String
  productCategory   ProductCategory @relation("ProductCategory", fields: [productCategoryId], references: [id])
  createdAt         DateTime        @default(now())
  updatedAt         DateTime?       @updatedAt
}

model ProductCategory {
  id           String    @id @unique @default(uuid())
  name         String
  interestRate Float?
  products     Product[] @relation("ProductCategory")
  createdAt    DateTime  @default(now())
  updatedAt    DateTime? @updatedAt
}

model User {
  id        String         @id @unique @default(uuid())
  name      String?
  email     String         @unique
  cpf       String         @unique
  status    UserStatusEnum @default(ACTIVE)
  password  String
  cart      UserCart?      @relation("UserId")
  photoUrl  String?
  createdAt DateTime       @default(now())
  updatedAt DateTime?      @updatedAt
  deletedAt DateTime?
}

enum UserStatusEnum {
  ACTIVE
  INACTIVE
  BANNED
}
